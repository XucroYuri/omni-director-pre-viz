---
status: REFERENCE
---

# Vibe Coding 标准化规则（PM 约束 Agent 的可执行版本）

> 目标：把“会写代码”升级为“可控、可验收、可复盘”的 Agent 协作工程流程。  
> 适用：需求澄清、方案设计、代码修改、迁移重构、评审与交付。

## 0. 适用范围与优先级

### 0.1 适用范围
- 任何由 Agent 参与的研发活动：写代码 / 改代码 / 评审 / 迁移 / 写文档 / 写脚本。

### 0.2 规则优先级（冲突时以高者为准）
1) 项目内**硬红线/硬门禁**（例如 `rules.md`、`docs/governance/Risk-Audit-Checklist-2026.md`、CI 门禁、CODEOWNERS）
2) 本文档（Vibe Coding 标准化规则）
3) 口头约定 / 聊天记录 / “照着感觉来”的临时想法

## 1. 角色与职责（避免“没人为结果负责”）

- **PM（需求方）**：写清目标/非目标/验收；明确约束与风险；决定取舍；对“是否接受交付”负责。
- **Maintainer（维护者）**：对“锁定区域/安全红线/成本红线”拥有最终解释权；对合并负责。
- **Agent（执行者）**：对“按约束交付 + 不乱改 + 可复现验证 + 可追溯说明”负责。

## 2. PM 写需求的标准输入（必须可执行、可验收）

PM 交付给 Agent 的每个任务，必须包含以下字段（缺失即视为“不完整输入”，Agent 必须先补问）：

1) **一句话目标**：要解决什么用户问题（不是“做个 XX 功能”）。
2) **非目标**：明确本次不做什么（防止 Agent 自行扩展范围）。
3) **约束/红线**：必须遵守的规则清单（项目规则引用到文件路径）。
4) **交付物**：要产出哪些文件/接口/文档、输出格式是什么。
5) **验收标准（DoD）**：可测试、可判断、可复现的标准（包括失败条件）。
6) **边界与风险**：潜在破坏面、回滚策略、是否允许“破坏性变更”。
7) **输入材料**：样例数据、截图、日志、复现步骤、相关链接/文件位置。

推荐直接使用：`dev/reference_vibe-coding-skill/templates/Task-Brief.md`。

## 3. Agent 执行规则（专业性与准确性的“硬约束”）

### 3.1 不允许“凭感觉写”
- **NEVER**：在未读现有代码/文档的情况下推断结构或接口。
- **NEVER**：编造“已运行/已验证/已修复”的事实。
- **MUST**：不确定时给出**验证路径**（例如要运行的命令、要查看的文件、要补充的输入）。

### 3.2 先对齐，再动手（防止高质量的错误工作）
- **MUST**：先复述“目标/非目标/红线/验收”，再开始实现。
- **MUST**：存在歧义时，先问 1~3 个**最关键澄清问题**，不要一口气问 20 个。

### 3.3 变更要可追溯（审计友好）
- **MUST**：任何重要结论都要能追溯到：
  - 需求输入（PM 任务简报）
  - 项目规则（文件路径）
  - 实际改动（文件路径；必要时行号）
- **MUST**：每次交付提供“改动清单 + 验证清单 + 风险/回滚提示”。

### 3.4 变更要最小化（减少不可控副作用）
- **MUST**：优先“根因修复”，但变更面必须可控；避免为了“优雅”做大重构。
- **SHOULD**：一次 PR/一次任务只解决一类问题；拆分可独立验收的步骤。
- **NEVER**：未被要求时进行大范围改名、目录搬迁、技术栈替换。

### 3.5 质量门禁（交付必须过关）
最低门禁（PM 可按任务加严）：
- **MUST**：能构建/能运行/能通过关键测试（或解释为什么本任务无法跑测试 + 给出替代验证）。
- **MUST**：关键路径具备可复现验证步骤（命令/操作路径）。
- **MUST**：新增/修改的约束与行为必须落到文档或规则中（避免知识只存在对话里）。

### 3.6 安全与合规（默认从严）
- **NEVER**：在前端 bundle、URL、日志、持久化存储中泄漏任何密钥/令牌。
- **MUST**：遵守锁定边界（例如模型 ID、Provider 配置、preload 暴露面等）；触碰锁定文件必须显式标注并提醒需要维护者审核。

## 4. 输出交付格式（让 PM 一眼判断“可不可以收”）

Agent 的最终交付必须包含：
1) **完成情况**：对应验收标准逐条勾选（或说明未完成原因）。
2) **改动点**：列出修改/新增的文件路径（必要时带行号）。
3) **验证步骤**：复制即可运行的命令/操作路径。
4) **风险与回滚**：潜在破坏面；如何回滚（例如恢复某文件/撤销某配置）。

推荐使用：`dev/reference_vibe-coding-skill/templates/Change-Report.md`。

## 5. 常见失败模式（PM 用来“卡住问题”）

- 任务描述缺失“非目标”，Agent 自动扩 scope，最后难以验收。
- 只说“修一下 bug”，但不给最小复现/日志/期望 vs 实际。
- 没写清硬红线，Agent 按预训练常识改模型 ID、改架构或引入云组件。
- 验收标准不可判定（例如“更好用”“更稳定”“更专业”）。
- 交付只描述“我改了”，但没有验证步骤与风险说明。

## 6. 在本项目中的落地方式（推荐）

- 需求与约束：以 `rules.md`（红线）+ `docs/governance/Risk-Audit-Checklist-2026.md`（风险门禁）为最高优先级输入给 Agent。
- 任务写法：用 `templates/Task-Brief.md`，并明确本次是否允许触碰锁定区域。
- 交付写法：用 `templates/Change-Report.md`，并在 `dev/log.md` 或 `dev/log_YYYYMMDD_*.md` 留痕可复盘。

---

**最后更新**：2025-12-20
